
<!DOCTYPE html>
<html lang="en">

<head>
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
			  
  
      
              
        
          <meta charset="utf-8">
<title>
      Configuring TinyMCE Styles in dotCMS
  </title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="	
">
<meta name="keywords" content="	
">
<meta name="author" content="	
">

<link rel="stylesheet" href="/application/themes/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/application/themes/bootstrap/css/bootstrap-responsive.min.css">
<link rel="stylesheet" href="/application/themes/bootstrap/css/theme.css">

<script src="/application/themes/bootstrap/js/jquery-1.8.2.min.js"></script>
<script src="/application/themes/bootstrap/js/bootstrap.min.js"></script>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-40173209-2', 'auto');
  ga('send', 'pageview');

</script>

<!--[if lt IE 7]>
  <div style=' clear: both; text-align:center; position: relative;'> <a href="http://www.microsoft.com/windows/internet-explorer/default.aspx?ocid=ie6_countdown_bannercode"><img src="http://www.theie6countdown.com/images/upgrade.jpg" border="0" alt="" /></a></div>  
<![endif]-->

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
      
      
  
  	</head>

<body class="homepage">
	
			  
  
      
              
        
          <header>
  <div class="container">
    <div class="navbar navbar-inverse">
      <div class="navbar-inner">
        <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="brand" href="/">austindlawless</a>
        <div class="nav-collapse collapse pull-right">
          <ul class="nav">
                                                      <li class=""><a href='/technology'>Technology</a></li>
                                                        <li class=""><a href='/god'>God</a></li>
                                                        <li class=""><a href='/about'>About</a></li>
                                    </ul> <!-- /.nav -->
        </div> <!-- /.nav-collapse -->
      </div> <!-- / .navbar-inner -->
    </div> <!-- / .navbar -->
  </div> <!-- /.container -->
</header>
      
      
  
  	

	<div class="container">


                
        
                                
                                            	            	                <div class="row">
	            	                	                	
	                    	                    	                    	
	                    <div class="span12">
	                        	                           		      	
		   
			         				         		
   		       
	                  
      
  
              	    	    		  		  	  	  		  		  		  	      
              
        
            <div class="news-header">
    <h2>
      Configuring TinyMCE Styles in dotCMS      		    </h2>
    <!--span class="byline"></span-->
    <time datetime="2015-06-11T12:45:00">Jun 11 2015 at 12:45 UTC</time>
    <div class="addThisNews">          
      
  
              	    	    		  		  	  	  		  		  		  	      
              
        
          <!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
<!-- AddThis Button END -->
      
      
    
  </div>
    <div class="clear"></div>
  </div>
  
  <div class="news-body">
    <p>It is common practice to use CSS classes to format content. With some configuration, the TinyMCE WYSIWYG editor can empower non-code level users to keep with this practice. The styles-dropdown (pictured below) can be populated with a list of classes that can be applied to text in the editor using a span.</p>

<p><img src="/dotAsset/26a3982b-3c49-48c6-adbe-3d25d3e2123a.png" width="1000" height="87" alt="TinyMCE WYSIWYG Menu Bar" title="TinyMCE WYSIWYG Menu Bar" /></p>


<p>By default the TinyMCE WYSIWYG editor in dotCMS includes the styles-dropdown but it is empty. In order to configure TinyMCE beyond the default install for dotCMS, the plugin needs to be installed to our static-plugin directory. Directions form dotCMS to do that are available <a href="http://dotcms.com/docs/latest/controlling-tinymce-wysiwyg" title="Enable TinyMCE Custom Configuration in dotCMS" target="_blank">here</a>.</p>


<p>With that out of the way, let's get to configuring some styles!</p>

<p>We will be modifying two of the files from the TinyMCE plugin: 'tiny_mce_config.jsp' and 'plugin.properties'.</p>

<h3>Updates to 'tiny_mce_config.jsp':</h3>

<p>There is a section of code as follows:</p>


<pre><code>&lt;% /*Set the WYSIWYG BLOCK FORMATS*/<br />&nbsp; String blockformats =APILocator.getPluginAPI().loadProperty("org.dotcms.tinymce_extended", "WYSIWYG_BLOCKFORMATS");<br />&nbsp; if(UtilMethods.isSet(blockformats)){<br />&nbsp; %&gt;<br />&nbsp; &lt;%="theme_advanced_blockformats : \""+blockformats+"\","%&gt;<br />&nbsp; &lt;%<br />&nbsp; }else{<br />&nbsp; %&gt;<br />&nbsp; &lt;%="theme_advanced_blockformats : \"p,div,h1,h2,h3,h4,h5,h6,blockquote,dt,dd,code,samp,pre\","%&gt;<br />&nbsp; &lt;%<br />&nbsp; }<br />%&gt;</code></pre>



<p>We are going to use this code as a model for how our styles-dropdown will be populated. Replace the 'blockformats' references with 'styles' and update the default string with a list of classes like:</p>

<p><code>\"content,nav,footer,subHeader\",<br /></code></p>

<p>Or for a prettier list in the dropdown:</p>

<p><code>\"Content=content;Nav=nav;Footer=footer;Sub Header=subHeader\",<br /></code></p>

<p>Even an empty list is fine because the property in the next file will override whatever we put as the default. The final product should look something like this:</p>



<pre><code>&lt;% /*Set the WYSIWYG STYLES*/<br />&nbsp; String styles =APILocator.getPluginAPI().loadProperty("org.dotcms.tinymce_extended", "WYSIWYG_STYLES");<br />&nbsp; if(UtilMethods.isSet(styles)){<br />&nbsp; %&gt;<br />&nbsp; &lt;%="theme_advanced_styles : \""+styles+"\","%&gt;<br />&nbsp; &lt;%<br />&nbsp; }else{<br />&nbsp; %&gt;<br />&nbsp; &lt;%="theme_advanced_styles : \"\","%&gt;<br />&nbsp; &lt;%<br />&nbsp; }<br />%&gt;</code></pre>



<p>Now we need to update the 'plugin.properties' file to include our custom styles.</p>

<h3>Updates to 'plugin.properties':</h3>

<p>We will again use the 'blockformats' configuration as a guide. It looks like this:</p>



<pre><code>&#x23;specify the theme blockformats the wysiwyg should use<br />&#x23;if is not set by default use this blocksformats: "p,div,h1,h2,h3,h4,h5,h6,blockquote,dt,dd,code,samp,pre" <br />WYSIWYG_BLOCKFORMATS=p,div,h1,h2,h3,h4,h5,h6,blockquote,dt,dd,code,samp,pre<br /></code></pre>

<p>The resulting 'styles' section looks like this:</p>

<pre><code>&#x23;specify the theme styles the wysiwyg should use<br />&#x23;if is not set the default is: ""<br />WYSIWYG_STYLES=Content=content;Nav=nav;Footer=footer;Sub Header=subHeader</code></pre>

<p>Now when we restart the server, the TinyMCE WYSIWYG editor will have a populated styles-dropdown that will apply &lt;span class="style"&gt;...&lt;/span&gt; to our content that can be formatted using our normal CSS file for our site.</p>    <div class="tags">
      <b>Tags:</b> 
                </div>
  </div>
  <div class="addThisNews">          
      
  
              	    	    		  		  	  	  		  		  		  	      
              
        
          <!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
<!-- AddThis Button END -->
      
      
    
  </div>
  <div class="clear p3">&nbsp;</div>
  <div class="border-bot wrapper p3"><a class="top" href="#">top</a></div>
  
  <div class="comments">
    <!-- Uncomment desired settings -->
                    
    
        
		  		  		
		

				          
      
  
              	    	    		  		  	  	  		  		  		  	      
              
        
          









<script>

//This function deals with the replies and new comments

 function _dotReply(commentInode){

    document.getElementById('contentInode').value=commentInode;
    var commentForm =  document.getElementById('commentForm');
    if(commentForm){
      commentForm.style.display="";
    }
    var nameField = document.getElementById('name');
    if(nameField){
      nameField.focus();
    }
  }
  
  
  
//This function creates the form for posting the comments. Output HTML is returned at the end of the function since
//there are different parts on the page that use this HTML to open a form to write a comment. When a link is clicked
//to post a new comment, the div id just following the link is passed as an argument to this function. 

 function _createPostCommentPlace(activatedDiv){
   //activeDiv is the div which is being worked on. It gets its value from the hidden field selectedDiv which is
   //"" initially
     var activeDiv = document.getElementById("selectedDiv").value;

     if(activeDiv != "" && activeDiv != activatedDiv){
       document.getElementById(activeDiv).innerHTML = " ";
     }   

    var HTML = "<h3>Post a Comment</h3><form action=\"/dotCMS/comments\" method=\"post\" id=\"commentsForm\" name=\"commentsForm\">";
    HTML += "<input type=\"hidden\" id=\"dispatch\" name=\"dispatch\" value=\"saveComments\" />";
    HTML += "<input type=\"hidden\" id=\"commentAutoPublish\" name=\"commentAutoPublish\" value=\"true\" />";
    HTML += "<input type=\"hidden\" id=\"commentUseCaptcha\" name=\"commentUseCaptcha\" value=\"true\" />";
    HTML += "<input type=\"hidden\" id=\"commentStripHtml\" name=\"commentStripHtml\" value=\"\" />";
    HTML += "<input type=\"hidden\" id=\"commentForceLogin\" name=\"commentForceLogin\" value=\"\" />";
    HTML += "<input type=\"hidden\" id=\"commentTitle\" name=\"commentTitle\" value=\"Comments\" />";
    HTML += "<input type=\"hidden\" id=\"referrer\" name=\"referrer\" value=\"/blog-post/configuring-tinymce-styles-in-dotcms\" />";
    HTML += "<input type=\"hidden\" id=\"contentInode\" name=\"contentInode\" value=\"a18b2e2d-7506-47e6-b534-36dcb1f24453\" />";
    HTML += "<input type=\"hidden\" id=\"emailTemplate\" name=\"emailTemplate\" value=\"static/comments/comments_email_template.html\" />";
    HTML += "<input type=\"hidden\" id=\"commentsModeration\" name=\"commentsModeration\" value=\"\" />";
    HTML += "<input type=\"hidden\" id=\"commentUseAudioCaptcha\" name=\"commentUseAudioCaptcha\" value=\"false\" />";
    
    HTML += "<div class=\"field-wrapper\">";
                  HTML += "<div class=\"field-wrapper-col1\">";
        HTML += "<label for=\"name\">Name:</label>";
        HTML += "<input id=\"name\" class=\"name\" name=\"name\"  type=\"text\" value=\"\">";
      HTML += "<div>";


                  HTML += "<div class=\"field-wrapper-col2\">";
        HTML += "<label for=\"email\">Email:</label>";
        HTML += "<input id=\"email\" name=\"email\" class=\"email\" type=\"text\" value=\"\">";
      HTML += "</div>";
    HTML += "</div>";
    
        
    HTML += "<div class=\"field-wrapper\">";
      HTML += "<textarea name=\"comment\" id=\"comment-textarea\"></textarea>";
    HTML += "<div>";
    
            HTML += "<div class=\"field-wrapper\">";
      HTML += "<label for=\"notify\" class=\"CheckBox\"><input name=\"notify\" value=\"yes\" type=\"checkbox\" \"> Please notify me of upcoming comments via email.</label>";
    HTML += "</div>";

          HTML += "<div class=\"captcha-wrapper\">";
        HTML += "<div class=\"captcha-image\">";
          HTML += "<label for=\"captchaImage\">Type what you see in the grey box</label>";
          HTML += "<div id=\"comments-captcha-image\" name=\"captchaImage\"><img src='/Captcha.jpg?0.5259602122434718'  width='200' height='50' alt='Captcha' title='Captcha Image'/></div>";
          HTML += "<div id=\"comments-captcha-audio\"></div>";
        HTML += "</div>";
        
        HTML += "<div class=\"captcha-tools\">";
          HTML += "<div id=\"comments-captcha-reset\">";
            HTML += "If you can't read this, <a href=\"javascript:resetCaptcha();\">try another one.</a>";
            HTML += "<div id=\"comments-captcha-audio-play\" class='captcha-audio-play' onclick='javascript:playAudioCaptcha();'>Audio</div>";
          HTML += "</div>";
          HTML += "<input type='text' id=\"captcha-text\" class=\"captcha\" name=\"captcha\"  type=\"text\" >";
        HTML += "</div>";
      HTML += "</div>";
        
        
    HTML += "<input type=\"hidden\" name=\"accept\" value=\"yes\" >";
    HTML += "<input type=\"hidden\" name=\"activeDiv\" value=\"" + activatedDiv + "\" >";
    
    HTML += "<div id=\"comment-button\">";
      HTML += "<input class=\"post\" name=\"submit\" value=\"Post Comment\" type=\"submit\">";
    HTML += "</div>";
    
    HTML += "</form>";

    //The inner HTML of the div is set to the output HTML
    document.getElementById(activatedDiv).innerHTML = HTML;
    
    document.getElementById("selectedDiv").value = activatedDiv;

    return HTML;
  }
 
</script>


<!-- COMMENTS START -->
<div class="comments" id="commentsIdt">
  <div id="comments"></div>
  <input type="hidden" id="selectedDiv" value="" >
      <span class="comments-title">Comments</span>
    <span class="comments-count">(0)</span>
  <a href="javascript:_createPostCommentPlace('formBody');_dotReply('formBody')">Post a Comment</a>
  
        <div class="no-comments"><a href="javascript:_createPostCommentPlace('formBody');_dotReply('formBody')">Be the first to comment on this story</a>!</div>
  
      <div class="comments-form">
      <div class="comments-messages">




</div>
      <div class="comments-form-body" id="formBody"></div>      
    </div>
    <div class="clear">&nbsp;</div>
</div>

<script>
    
  _createPostCommentPlace('formBody');
  
  function playAudioCaptcha(){
    document.getElementById('comments-captcha-audio-play').setAttribute("class","captcha-audio-playing");
    var rand=Math.floor(Math.random()*999999999);
    document.getElementById('comments-captcha-audio').innerHTML = '<embed hidden="false" src="/audioCaptcha.wav?r=' + rand +'" id="captcha-sound" controller="false" width="0" height="0" autoplay="true" autostart="true" type="audio/wav" />';
      
    setTimeout(function(){
      document.getElementById('comments-captcha-audio-play').setAttribute("class","captcha-audio-play");
    },8000);

  }
  
  function resetCaptcha(){
    var rand=Math.floor(Math.random()*999999999)
    document.getElementById('comments-captcha-image').innerHTML = "<img width='200' height='50' src='/Captcha.jpg?r=" + rand + "'>";
  }
</script>

<!-- COMMENTS ENDS -->
      
      
    
  	
  </div>
  <div class="clear p3"></div>
  <div class="border-bot wrapper p3"><a class="top" href="#">top</a></div>



      
      
    
           
   
	                    </div><!--/span-->
	                	            </div><!--/row-->
                    
                                
	</div><!-- /container-->
	
			          
      
  
      
              
        
          <hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="span12" style="text-align:right;">
        <h6>
          <small><a href="http://austindlawless.com/">austindlawless.com</a> &copy; 2015  All rights reserved.</small>
        </h6>
      </div>
    </div>
  </div>
</footer>
      
      
    
  	
</body>
</html>

